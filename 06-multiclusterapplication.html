<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Multicluster Application Deployment with Advanced Cluster Management and GitOps</title>
    <link rel="canonical" href="https://xbryan1.github.io/rhte-2023-acm-docs/06-multiclusterapplication.html">
    <link rel="prev" href="05-policies.html">
    <link rel="next" href="#06-policies.adoc#hibernategui">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="./_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="./_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://xbryan1.github.io/rhte-2023-acm-docs">Multicluster Application Deployment with Advanced Cluster Management and GitOps</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-setup.html">1. Environment Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#architecture">Hands-on Lab Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#occontext">Switching context between clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#sources">Hands-on Lab Git repository</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-deploy.html">2. Install Advanced Management and GitOps Operators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#install">Install RHACM Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#console">Access to the ACM Web Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#gitops">Install GitOps Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#gitopsacm">Integrate GitOps and ACM</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#managedcluster">Registering local-cluster to GitOps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-deploy.html#deployall">App Of Everything</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-installcluster.html">3. Install a new Openshift Cluster</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-installcluster.html#credentials">Setup credentials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-installcluster.html#credscli">Setup credentials via CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-installcluster.html#install">Deploy new Openshift Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-installcluster.html#installgui">Deploy a new OpenShift cluster via web interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-installcluster.html#installcli">Deploy a new OpenShift cluster via CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-installcluster.html#occontextnew">Switching context for the new cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-installcluster.html#registertnew">Registering rhte2023-cluster01 to GitOps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-application.html">4. Deploy a Multicluster Application with GitOps</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-application.html#applicationacm01">Application 1 - Deploying a ChatBot application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-application.html#applicationreplicas">Application 1 - Change number of replicas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-application.html#applicationacm02">Application 2 - Deploying a ChatDraw application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-application.html#applicationimages">Application 2 - Change container image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-application.html#applicationacm03">Application - Deploying multiple Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="04-application.html#applicationsync">Application - Sync and Diff</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="05-policies.html">5. Setup Advanced Cluster Management Policies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-policies.html#firstpolicygui">Setup the first policy via web</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-policies.html#secondpolicygui">Setup the second policy via web</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-policies.html#firstpolicycli">Setup the first policy via CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-policies.html#secondpolicycli">Setup the second policy via CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-policies.html#firstpolicygitops">Setup the first policy using GitOps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-policies.html#secondpolicygitops">Setup the first policy using GitOps</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-multiclusterapplication.html">6. Advanced Cluster Management Multicluster Application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#06-policies.adoc#hibernategui">Hibernate clusters via web</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#06-policies.adoc#hibernatecli">Hibernate clusters via CLI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Multicluster Application Deployment with Advanced Cluster Management and GitOps</a></li>
    <li><a href="06-multiclusterapplication.html">6. Advanced Cluster Management Multicluster Application</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/xbryan1/rhte-2023-acm-docs/edit/master/documentation/modules/ROOT/pages/06-multiclusterapplication.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="multiclusterapplication"><a class="anchor" href="#multiclusterapplication"></a>Advanced Cluster Management Multicluster Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally, you are going to check if your applications are fault tolerant. In this LAB, you have deployed four applications:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>rhte2023-application-01: Deployed on both clusters.</p>
</li>
<li>
<p>rhte2023-application-02: Deployed on the remote cluster.</p>
</li>
<li>
<p>rhte2023-application-03: Deployed on the remote cluster.</p>
</li>
<li>
<p>rhte2023-application-04: Deployed on the cluster with less resources available.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, we are going to hibernate the rhte2023-cluster01 cluster to check if the applications are fault tolerant.</p>
</div>
<div class="paragraph">
<p>As the rhte2023-application-01 application is on both clusters, this application is going to lose one of the replicas.
The rhte2023-application02 and rhte2023-application03 applications are running in the rhe2023-cluster01 cluster, but the applications can not run on any OpenShift clusters. So, both applications are not going to be available after hibernating the cluster.
Finally, the rhte2023-application-04 is running on the rhte2023-cluster01 but can run on any cluster. So, this applications will be moved after hibernating the rhte2023-cluster01 cluster.</p>
</div>
<div class="paragraph">
<p>You can check the rhte2023-application-04 application status in Red Hat Advanced Cluster Management web interface. You can go into "Applications" section and search for "rhte2023-application-04". You will see that the application is running on 1 Remote cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/hibernate/hibernate01.png" alt="hibernate01">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hibernategui"><a class="anchor" href="#hibernategui"></a>Hibernate the cluster using the web interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To hibernate the cluster, you need to enter into the Red Hat Advanced Cluster Management web interface route first. You can find it in the open-cluster-management namespace.</p>
</div>
<div class="paragraph">
<p>After entering into Red Hat Advanced Cluster Management web interface, you need to enter into the "Infrastructure" &#8594; "Clusters" section.</p>
</div>
<div class="paragraph">
<p>You should click into the three dot button on the bottom right to get the cluster options.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/hibernate/hibernate02.png" alt="hibernate02">
</div>
</div>
<div class="paragraph">
<p>Now, you can select "Hibernate cluster".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/hibernate/hibernate03.png" alt="hibernate03">
</div>
</div>
<div class="paragraph">
<p>The next page will ask for Hibernate confirmation. You should select the "Hibernate" button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/hibernate/hibernate04.png" alt="hibernate04">
</div>
</div>
<div class="paragraph">
<p>You can wait some time until the cluster is hibernated. When the cluster is Hibernated, you can check that the application has moved to the Local cluster. Please, note that the application could take some time to be migrated.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/hibernate/hibernate05.png" alt="hibernate05">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hibernatecli"><a class="anchor" href="#hibernatecli"></a>Hibernate the cluster using the CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To hibernate the cluster using the CLI, you need to patch the ClusterDeployment object adding the powerState: Hibernating into the spec section. You can use this command to hibernate the cluster:</p>
</div>
<div class="listingblock lines_space console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc --context acm patch ClusterDeployment rhte2023-cluster01 -n rhte2023-cluster01 --type merge -p '{"spec":{"powerState":"Hibernating"}}'</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="05-policies.html">5. Setup Advanced Cluster Management Policies</a></span>
  <span class="next"><a href="#06-policies.adoc#hibernategui">Hibernate clusters via web</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="./_/js/vendor/clipboard.js"></script>
<script src="./_/js/site.js"></script>
<script async src="./_/js/vendor/highlight.js"></script>
  </body>
</html>
